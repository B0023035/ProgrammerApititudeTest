# ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ - Part 4: DB ã‚¹ã‚­ãƒ¼ãƒãƒ»APIä»•æ§˜

## ğŸ“¦ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ

### ãƒ†ãƒ¼ãƒ–ãƒ«é–¢é€£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    èªè¨¼ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                   â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ users â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ student_id (UNIQUE)     â”‚ â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ID (å­¦ç”Ÿ/å—é¨“è€…)         â”‚
â”‚  â”‚ email (UNIQUE)          â”‚                                    â”‚
â”‚  â”‚ password_hash           â”‚                                    â”‚
â”‚  â”‚ full_name               â”‚                                    â”‚
â”‚  â”‚ phone                   â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â”‚ is_active               â”‚                                    â”‚
â”‚  â”‚ last_login_at           â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚           â–²                                                     â”‚
â”‚           â”‚ (1:N é–¢é€£)                                         â”‚
â”‚           â”‚                                                     â”‚
â”‚  â”Œâ”€ admins â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ user_id (FK)            â”‚ â”€â”€â†’ users.id                     â”‚
â”‚  â”‚ admin_type              â”‚ ('super'/'event'/'support')      â”‚
â”‚  â”‚ permissions (JSON)      â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ sessions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ user_id (FK)            â”‚ â”€â”€â†’ users.id                     â”‚
â”‚  â”‚ session_token           â”‚ (Redis ã«ä¿å­˜)                    â”‚
â”‚  â”‚ expires_at              â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ password_resets â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ user_id (FK)            â”‚ â”€â”€â†’ users.id                     â”‚
â”‚  â”‚ token (UNIQUE)          â”‚                                    â”‚
â”‚  â”‚ expires_at              â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      è©¦é¨“ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ event_code (UNIQUE)     â”‚ â† ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰                â”‚
â”‚  â”‚ title                   â”‚                                    â”‚
â”‚  â”‚ description             â”‚                                    â”‚
â”‚  â”‚ start_at                â”‚                                    â”‚
â”‚  â”‚ end_at                  â”‚                                    â”‚
â”‚  â”‚ duration_minutes        â”‚ (è©¦é¨“æ™‚é–“)                         â”‚
â”‚  â”‚ total_questions         â”‚                                    â”‚
â”‚  â”‚ passing_score           â”‚ (åˆæ ¼ãƒ©ã‚¤ãƒ³)                       â”‚
â”‚  â”‚ difficulty              â”‚ ('easy'/'normal'/'hard')         â”‚
â”‚  â”‚ created_by (FK)         â”‚ â”€â”€â†’ admins.id                    â”‚
â”‚  â”‚ is_published            â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚           â–²                                                     â”‚
â”‚           â”‚ (1:N)                                              â”‚
â”‚           â”‚                                                     â”‚
â”‚  â”Œâ”€ exam_sessions â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ user_id (FK)            â”‚ â”€â”€â†’ users.id                     â”‚
â”‚  â”‚ event_id (FK)           â”‚ â”€â”€â†’ events.id                    â”‚
â”‚  â”‚ status                  â”‚ ('started'/'in_progress'/        â”‚
â”‚  â”‚                         â”‚  'completed'/'abandoned')        â”‚
â”‚  â”‚ started_at              â”‚                                    â”‚
â”‚  â”‚ completed_at            â”‚                                    â”‚
â”‚  â”‚ ip_address              â”‚ (ä¸æ­£æ¤œçŸ¥ç”¨)                      â”‚
â”‚  â”‚ user_agent              â”‚ (ãƒ‡ãƒã‚¤ã‚¹ç‰¹å®šç”¨)                  â”‚
â”‚  â”‚ timezone                â”‚ (ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³æ¤œè¨¼)                â”‚
â”‚  â”‚ flagged_for_review      â”‚ (ä¸æ­£ãƒ•ãƒ©ã‚°)                      â”‚
â”‚  â”‚ final_score             â”‚ (æœ€çµ‚ã‚¹ã‚³ã‚¢)                      â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚           â–²                                                     â”‚
â”‚           â”‚ (1:N)                                              â”‚
â”‚           â”‚                                                     â”‚
â”‚  â”Œâ”€ answers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ exam_session_id (FK)    â”‚ â”€â”€â†’ exam_sessions.id             â”‚
â”‚  â”‚ question_id (FK)        â”‚ â”€â”€â†’ questions.id                 â”‚
â”‚  â”‚ choice_id (FK)          â”‚ â”€â”€â†’ choices.id                   â”‚
â”‚  â”‚ answered_at             â”‚                                    â”‚
â”‚  â”‚ is_correct              â”‚ (è‡ªå‹•åˆ¤å®š)                        â”‚
â”‚  â”‚ time_taken_seconds      â”‚ (ã“ã®å•é¡Œã«è¦ã—ãŸæ™‚é–“)            â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å•é¡Œãƒ»å‡ºé¡Œç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                       â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ questions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ event_id (FK)           â”‚ â”€â”€â†’ events.id                    â”‚
â”‚  â”‚ question_text           â”‚                                    â”‚
â”‚  â”‚ question_number         â”‚ (å‡ºé¡Œé †åº)                        â”‚
â”‚  â”‚ difficulty_level        â”‚ ('easy'/'medium'/'hard')         â”‚
â”‚  â”‚ category                â”‚ (åˆ†é‡)                           â”‚
â”‚  â”‚ explanation             â”‚ (è§£èª¬)                           â”‚
â”‚  â”‚ created_by (FK)         â”‚ â”€â”€â†’ admins.id                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚           â–²                                                     â”‚
â”‚           â”‚ (1:N)                                              â”‚
â”‚           â”‚                                                     â”‚
â”‚  â”Œâ”€ choices â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ question_id (FK)        â”‚ â”€â”€â†’ questions.id                 â”‚
â”‚  â”‚ choice_text             â”‚                                    â”‚
â”‚  â”‚ choice_order            â”‚ (è¡¨ç¤ºé †åº)                        â”‚
â”‚  â”‚ is_correct              â”‚ (æ­£è§£åˆ¤å®š)                        â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ practice_questions â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ question_id (FK)        â”‚ â”€â”€â†’ questions.id                 â”‚
â”‚  â”‚ used_in_event_ids       â”‚ (è¤‡æ•°ã‚¤ãƒ™ãƒ³ãƒˆã§å†åˆ©ç”¨)           â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â”‚ updated_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸æ­£ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£è¦–ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«                 â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ exam_violations â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ exam_session_id (FK)    â”‚ â”€â”€â†’ exam_sessions.id             â”‚
â”‚  â”‚ violation_type          â”‚ ('timing'/'ip_change'/           â”‚
â”‚  â”‚                         â”‚  'device_change'/'pattern')      â”‚
â”‚  â”‚ severity                â”‚ ('low'/'medium'/'high')          â”‚
â”‚  â”‚ description             â”‚                                    â”‚
â”‚  â”‚ detected_at             â”‚                                    â”‚
â”‚  â”‚ flagged_by (FK)         â”‚ â”€â”€â†’ admins.id (nullable)         â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€ audit_logs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ id (PK)                 â”‚                                    â”‚
â”‚  â”‚ user_id (FK)            â”‚ â”€â”€â†’ users.id                     â”‚
â”‚  â”‚ action                  â”‚ ('login'/'submit'/'review'/      â”‚
â”‚  â”‚                         â”‚  'delete')                       â”‚
â”‚  â”‚ resource_type           â”‚ ('exam'/'user'/'event')         â”‚
â”‚  â”‚ resource_id             â”‚                                    â”‚
â”‚  â”‚ changes (JSON)          â”‚ (å¤‰æ›´å†…å®¹)                        â”‚
â”‚  â”‚ ip_address              â”‚                                    â”‚
â”‚  â”‚ user_agent              â”‚                                    â”‚
â”‚  â”‚ created_at              â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

### èªè¨¼ API

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/auth/register                                        â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:                                                     â”‚
â”‚ {                                                              â”‚
â”‚   "student_id": "STU001",                                      â”‚
â”‚   "email": "user@example.com",                                 â”‚
â”‚   "password": "SecurePass123!",                                â”‚
â”‚   "full_name": "å±±ç”°å¤ªéƒ"                                     â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 201 Created                                        â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "user_id": 1,                                              â”‚
â”‚     "email": "user@example.com",                               â”‚
â”‚     "session_id": "xxxx",                                      â”‚
â”‚     "redirect": "/dashboard"                                   â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 422 Validation Error / 409 Conflict (IDé‡è¤‡)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ãƒ­ã‚°ã‚¤ãƒ³                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/auth/login                                           â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:                                                     â”‚
â”‚ {                                                              â”‚
â”‚   "email": "user@example.com",                                 â”‚
â”‚   "password": "SecurePass123!"                                 â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "user_id": 1,                                              â”‚
â”‚     "role": "user",                                            â”‚
â”‚     "session_expires_at": "2026-01-23T12:00:00Z"              â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ Set-Cookie: LARAVEL_SESSION=...; HttpOnly; Secure             â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 401 Unauthorized / 429 Too Many Requests               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/auth/logout                                          â”‚
â”‚ Middleware: auth                                               â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ: (æœ¬ä½“ãªã—)                                          â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "message": "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ"                              â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ Set-Cookie: LARAVEL_SESSION=; Max-Age=0                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è©¦é¨“ API

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã§è©¦é¨“é–‹å§‹                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/exam/start                                           â”‚
â”‚ Middleware: auth                                               â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:                                                     â”‚
â”‚ {                                                              â”‚
â”‚   "session_code": "EXAM2025001"                                â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "exam_session_id": 42,                                     â”‚
â”‚     "event_id": 5,                                             â”‚
â”‚     "title": "ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼é©æ€§è©¦é¨“ Part1",                    â”‚
â”‚     "duration_minutes": 60,                                    â”‚
â”‚     "total_questions": 100,                                    â”‚
â”‚     "started_at": "2026-01-23T10:00:00Z",                      â”‚
â”‚     "deadline": "2026-01-23T11:00:00Z"                         â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 404 Not Found / 400 Event Not Active                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. å•é¡Œå–å¾—                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /api/exam/question/:id                                     â”‚
â”‚ Middleware: auth, exam.active                                  â”‚
â”‚                                                                â”‚
â”‚ ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:                                               â”‚
â”‚ ?exam_session_id=42&question_number=1                          â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "question_id": 1,                                          â”‚
â”‚     "question_number": 1,                                      â”‚
â”‚     "total_questions": 100,                                    â”‚
â”‚     "text": "æ¬¡ã®ã†ã¡ã€æ­£ã—ã„ãƒ‡ãƒ¼ã‚¿å‹ã¯?",                    â”‚
â”‚     "choices": [                                               â”‚
â”‚       {                                                        â”‚
â”‚         "id": 1,                                               â”‚
â”‚         "text": "int",                                         â”‚
â”‚         "order": 1                                             â”‚
â”‚       },                                                       â”‚
â”‚       {                                                        â”‚
â”‚         "id": 2,                                               â”‚
â”‚         "text": "string",                                      â”‚
â”‚         "order": 2                                             â”‚
â”‚       },                                                       â”‚
â”‚       ...                                                      â”‚
â”‚     ],                                                         â”‚
â”‚     "time_remaining_seconds": 3542                             â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 404 Question Not Found / 403 Session Expired          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. è§£ç­”æå‡º                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/exam/answer                                          â”‚
â”‚ Middleware: auth, exam.active                                  â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:                                                     â”‚
â”‚ {                                                              â”‚
â”‚   "exam_session_id": 42,                                       â”‚
â”‚   "question_id": 1,                                            â”‚
â”‚   "choice_id": 2,                                              â”‚
â”‚   "time_taken_seconds": 45                                     â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "answer_id": 142,                                          â”‚
â”‚     "is_correct": true,                                        â”‚
â”‚     "current_progress": "1/100",                               â”‚
â”‚     "next_question_id": 2,                                     â”‚
â”‚     "time_remaining_seconds": 3497                             â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 422 Validation / 408 Session Timeout                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. è©¦é¨“æå‡º                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /api/exam/submit                                          â”‚
â”‚ Middleware: auth                                               â”‚
â”‚                                                                â”‚
â”‚ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ:                                                     â”‚
â”‚ {                                                              â”‚
â”‚   "exam_session_id": 42                                        â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ãƒ¬ã‚¹ãƒãƒ³ã‚¹: 200 OK                                             â”‚
â”‚ {                                                              â”‚
â”‚   "status": "success",                                         â”‚
â”‚   "data": {                                                    â”‚
â”‚     "final_score": 82,                                         â”‚
â”‚     "grade": "A",                                              â”‚
â”‚     "raw_score": 82,                                           â”‚
â”‚     "adjusted_score": 82,                                      â”‚
â”‚     "violations_detected": 0,                                  â”‚
â”‚     "certificate_url": "/certificates/exam-42-cert.pdf",      â”‚
â”‚     "redirect": "/result/42"                                   â”‚
â”‚   }                                                            â”‚
â”‚ }                                                              â”‚
â”‚                                                                â”‚
â”‚ ã‚¨ãƒ©ãƒ¼: 400 Session Not Completed / 409 Already Submitted     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**â¸ï¸ ç¶šãã¯æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§...**
