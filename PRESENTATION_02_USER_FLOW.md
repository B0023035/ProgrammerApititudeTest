# 発表資料用解説 - 2. ユーザーと管理者の動き

## 👤 ユーザー（登録会員）の動き

### ステップ1: 登録（はじめての時だけ）

```
1. サイトにアクセス
   ↓
2. 「新規登録」をクリック
   ↓
3. 登録フォームに入力
   ├─ メールアドレス
   ├─ 名前
   ├─ パスワード（暗号化される）
   └─ 入学年度（オプション）
   ↓
4. 「登録」をクリック
   ↓
5. 登録完了 ✓
   (登録内容はデータベースに保存される)
```

**重要**: パスワードは **暗号化** されるので、システム管理者でも見ることができません。

---

### ステップ2: ログイン（毎回）

```
1. サイトにアクセス
   ↓
2. 「ログイン」をクリック
   ↓
3. ログインフォームに入力
   ├─ メールアドレス
   └─ パスワード
   ↓
4. 「ログイン」をクリック
   ↓
5. システムが確認
   ├─ このメール、データベースに存在する？
   └─ パスワード、正しい？
   ↓
6. ✅ OKならログイン成功
   ❌ NGなら「メール or パスワードが違います」エラー
```

---

### ステップ3: 試験を選択

```
ダッシュボード表示
   ↓
利用可能な試験一覧
   ├─ 「2024年1月 適性検査」 ← クリック
   ├─ 「2024年2月 適性検査」
   └─ 「2024年3月 適性検査」
   ↓
試験の詳細情報表示
   ├─ 試験名
   ├─ 開始日時
   ├─ 終了日時
   ├─ 制限時間
   └─ 「この試験を始める」ボタン
   ↓
ボタンをクリック
```

---

### ステップ4: 試験実施

```
試験開始画面
   ├─ 注意事項表示
   │  ├─ 制限時間: 120分
   │  ├─ 問題は全3パート
   │  ├─ 一度見た問題は戻れない
   │  └─ 解答後は変更不可
   │
   └─ 「試験を始める」ボタン
   ↓
┌──────────────────────────────┐
│ Part 1 (30問)                │
│                              │
│ [問題1] テキスト + 画像       │
│ 選択肢: ①A ②B ③C ④D       │
│ → ユーザーが①をクリック      │
│                              │
│ [問題2] テキスト + 画像       │
│ 選択肢: ①A ②B ③C ④D       │
│ → ユーザーが②をクリック      │
│                              │
│ ... (30問すべて)             │
│                              │
│ 進捗表示: 30/30 完了         │
│ 「Part 2へ進む」ボタン        │
└──────────────────────────────┘
   ↓
Part 2 実施（同じフロー）
   ↓
Part 3 実施（同じフロー）
   ↓
全パート完了
```

---

### ステップ5: 結果表示

```
試験完了！
   ↓
自動採点（サーバーが計算）
   ├─ 全90問のうち
   ├─ 何問正解したか
   └─ パーセンテージ計算
   ↓
結果画面
   ├─ 総得点: 75/100 点
   ├─ Part別成績
   │  ├─ Part 1: 25/30 (83%)
   │  ├─ Part 2: 23/30 (77%)
   │  └─ Part 3: 27/30 (90%)
   │
   ├─ 成績レベル: 「良好」
   └─ [ダッシュボードに戻る] [練習問題を見る]
```

---

### ステップ6: 過去結果の確認

```
ダッシュボード
   ↓
「過去の試験結果」セクション
   ├─ 2024-01-20 適性検査1 → 75点
   ├─ 2024-01-15 適性検査2 → 82点
   ├─ 2024-01-10 適性検査3 → 70点
   └─ [詳細を見る]
   ↓
結果の詳細確認可能
```

---

## 🔧 管理者の動き

### ステップ1: 管理者ログイン

```
管理者が専用URL (例: /admin) にアクセス
   ↓
「管理者ログイン」ページ表示
   ├─ メールアドレス入力
   └─ パスワード入力
   ↓
「ログイン」ボタンをクリック
   ↓
✅ ログイン成功 → 管理ダッシュボード表示
```

**重要**: 通常のユーザーは管理者ページにアクセスできません（プログラムで制限）

---

### ステップ2: イベント（試験）を作成

```
管理ダッシュボード
   ↓
[イベント管理] をクリック
   ↓
「新規イベント作成」ボタン
   ↓
作成フォーム表示
   ├─ イベント名: 「2024年1月 適性検査」
   ├─ セッションコード: 「EXAM202401」
   │  （ゲストが入力するコード）
   │
   ├─ 試験期間
   │  ├─ 開始日時: 2024-01-20 9:00
   │  └─ 終了日時: 2024-01-20 17:00
   │
   ├─ 問題設定
   │  ├─ Part 1: 30問
   │  ├─ Part 2: 30問
   │  └─ Part 3: 30問
   │
   └─ 制限時間: 120分（2時間）
   ↓
「イベントを作成」ボタン
   ↓
✅ イベント作成完了
   (データベースに保存)
```

---

### ステップ3: 問題を登録

```
イベント詳細ページ
   ↓
[問題を追加] ボタン
   ↓
問題登録フォーム
   ├─ Part選択: 1
   ├─ 問題番号: 1
   ├─ 問題文: 「次の中で...」
   ├─ 画像: (アップロード)
   │
   ├─ 選択肢A: 「コンパイルエラー」
   ├─ 選択肢B: 「実行時エラー」
   ├─ 選択肢C: 「正常に動作する」
   ├─ 選択肢D: 「構文エラー」
   │
   └─ 正解: C
   ↓
「保存」ボタン
   ↓
✅ 問題登録完了

※ これを90問すべてで繰り返す
```

---

### ステップ4: 試験を実施させる

```
イベント作成 → 問題設定完了
   ↓
ユーザーとゲストに通知
   ├─ メール: 「試験がこれからです」
   ├─ サイトトップ: 「新しい試験が利用可能」
   └─ コード: 「EXAM202401」を共有
   ↓
受験者がアクセス
   ├─ ゲスト: コード入力 → 受験
   └─ ユーザー: ログイン → 試験選択 → 受験
```

---

### ステップ5: 成績確認

```
試験期間終了後
   ↓
管理ダッシュボード
[結果管理] をクリック
   ↓
成績一覧表表示
┌───────────────────────────────────┐
│ ユーザー名 │ 点数 │ 結果 │ 詳細  │
├───────────────────────────────────┤
│ 田中太郎  │ 75点 │ 合格 │ [見る] │
│ 鈴木花子  │ 82点 │ 合格 │ [見る] │
│ 高橋次郎  │ 45点 │ 不合格│ [見る] │
│ 佐藤美咲  │ 88点 │ 合格 │ [見る] │
└───────────────────────────────────┘
   ↓
   成績の詳細確認可能
   ├─ 問題別の正解/不正解
   ├─ 受験時間
   └─ Part別スコア
```

---

### ステップ6: 不正チェック

```
システムが不正を検知
   ├─ 別タブに切り替えた
   ├─ 答えをコピーしようとした
   └─ キーボード操作がない
   ↓
管理者に通知
「⚠️ 不正検知あり: 田中太郎」
   ↓
管理者が確認
   ├─ どんな不正か詳細確認
   ├─ 本当に不正なのか判断
   └─ アクション選択
       ├─ [成績を無効化する]
       ├─ [注記を付ける]
       └─ [問題なしと判定]
```

---

## 📊 ユーザーと管理者の関係図

```
┌────────────────────────────────────┐
│         管理者                      │
│ ┌──────────────────────────────┐  │
│ │ イベント作成                  │  │
│ │ ↓                             │  │
│ │ 問題登録                      │  │
│ │ ↓                             │  │
│ │ セッションコード発行          │  │
│ └──────────────┬────────────────┘  │
│                │                   │
│           「試験を実施」            │
│                │                   │
└────────────────┼───────────────────┘
                 │
        ┌────────▼────────┐
        │  セッションコード │
        │  試験内容        │
        └────────┬────────┘
                 │
        ┌────────▼────────┐
        │                 │
     ┌──▼──┐          ┌──▼──┐
     │ゲスト│          │ユーザ│
     │(無登録)       │(登録済)
     └──┬──┘          └──┬──┘
        │                │
        ▼                ▼
    受験結果          受験結果
    (一時表示)       (保存)
        │                │
        └────────┬────────┘
                 │
        ┌────────▼──────────┐
        │  管理者が成績確認   │
        │  (ダッシュボード)   │
        └────────────────────┘
```

---

## 💡 まとめ表

| フェーズ | ユーザー側     | 管理者側               |
| -------- | -------------- | ---------------------- |
| 準備     | 登録・ログイン | イベント作成、問題登録 |
| 実施     | 試験を受ける   | 試験を監視             |
| 結果     | 即座に成績表示 | 成績確認・分析         |
| 検証     | 不正検知される | 不正チェック・対応     |
