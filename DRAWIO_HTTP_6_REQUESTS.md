# Draw.ioç”¨ - HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

## ğŸ”„ ãƒ¡ã‚¤ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ•ãƒ­ãƒ¼å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Vue 3 + Inertia.js)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ HTTP Request
            â”‚ (CSRF Tokenä»˜ã)
            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Laravel Server                                      â”‚
â”‚  (Routing â†’ Middleware â†’ Controller)                       â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. Middlewareå‡¦ç†                                  â”‚  â”‚
â”‚  â”‚    â”œâ”€ CSRF Tokenæ¤œè¨¼                              â”‚  â”‚
â”‚  â”‚    â”œâ”€ èªè¨¼ç¢ºèª                                    â”‚  â”‚
â”‚  â”‚    â”œâ”€ Sessionæ¤œè¨¼                                 â”‚  â”‚
â”‚  â”‚    â””â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼/ç®¡ç†è€…æ¨©é™ç¢ºèª                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                             â”‚
â”‚               â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 2. Controllerã§å‡¦ç†                               â”‚  â”‚
â”‚  â”‚    â”œâ”€ ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³                    â”‚  â”‚
â”‚  â”‚    â”œâ”€ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè¡Œ                        â”‚  â”‚
â”‚  â”‚    â””â”€ Model â†’ DB ã‚¢ã‚¯ã‚»ã‚¹                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                             â”‚
â”‚               â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 3. DB Queryå®Ÿè¡Œ                                   â”‚  â”‚
â”‚  â”‚    â”œâ”€ SELECT / INSERT / UPDATE                    â”‚  â”‚
â”‚  â”‚    â”œâ”€ Eloquent ORMä½¿ç”¨                            â”‚  â”‚
â”‚  â”‚    â””â”€ ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                             â”‚
â”‚               â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 4. Inertia Responseç”Ÿæˆ                           â”‚  â”‚
â”‚  â”‚    â”œâ”€ JSX/Vue Component ã‚’æŒ‡å®š                    â”‚  â”‚
â”‚  â”‚    â”œâ”€ Props ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚ã‚‹                        â”‚  â”‚
â”‚  â”‚    â””â”€ HTML + JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚               â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTP Response
                â”‚ (200 OK / Redirect / Error)
                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Vue 3)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Response å—ã‘å–ã‚Š                               â”‚ â”‚
â”‚  â”‚    â””â”€ Props ãƒ‡ãƒ¼ã‚¿å–å¾—                            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                â”‚                                          â”‚
â”‚                â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 2. Vue Component ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°                       â”‚ â”‚
â”‚  â”‚    â”œâ”€ Props ã‚’ component ã«æ¸¡ã™                    â”‚ â”‚
â”‚  â”‚    â””â”€ UI æ›´æ–°                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                â”‚                                          â”‚
â”‚                â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³å¾…æ©Ÿ                  â”‚ â”‚
â”‚  â”‚    â”œâ”€ ã‚¯ãƒªãƒƒã‚¯                                    â”‚ â”‚
â”‚  â”‚    â”œâ”€ ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›                                â”‚ â”‚
â”‚  â”‚    â””â”€ ãƒœã‚¿ãƒ³æŠ¼ä¸‹                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                â”‚                                          â”‚
â”‚                â””â”€â†’ Step 1ã¸                              â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“® å…¸å‹çš„ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

### ä¾‹1: ãƒ­ã‚°ã‚¤ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```
ã€CLIENT â†’ SERVERã€‘

POST /login HTTP/1.1
Host: exam.example.com
Content-Type: application/json
X-CSRF-TOKEN: <csrf_token_value>

{
  "email": "user@example.com",
  "password": "password123"
}

â†“ â†“ â†“ Middlewareå‡¦ç† â†“ â†“ â†“
- CSRF Tokenæ¤œè¨¼
- Content-Typeæ¤œè¨¼

â†“ â†“ â†“ Controllerå‡¦ç† â†“ â†“ â†“
AuthController::login
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- DB: SELECT * FROM users WHERE email = ?
- password_hash æ¤œè¨¼
- Sessionä½œæˆ

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 302 Found
Location: /dashboard
Set-Cookie: LARAVEL_SESSION=...

â€» ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå¿œç­”
```

### ä¾‹2: è©¦é¨“é–‹å§‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```
ã€CLIENT â†’ SERVERã€‘

POST /exam/1/start HTTP/1.1
Host: exam.example.com
Content-Type: application/json
Authorization: Bearer <session_token>
X-CSRF-TOKEN: <csrf_token_value>

{
  "event_id": 1
}

â†“ â†“ â†“ Middlewareå‡¦ç† â†“ â†“ â†“
- èªè¨¼ç¢ºèª (Auth::check())
- CSRF Tokenæ¤œè¨¼
- Session Codeæ¤œè¨¼

â†“ â†“ â†“ Controllerå‡¦ç† â†“ â†“ â†“
ExamController::start
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- æ™‚åˆ»ç¢ºèª (ã‚¤ãƒ™ãƒ³ãƒˆé–‹å§‹/çµ‚äº†)
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç”Ÿæˆ

DBæ“ä½œ:
INSERT INTO exam_sessions (
  user_id, event_id, session_uuid, started_at
) VALUES (...)

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 200 OK
Content-Type: application/json
X-Inertia: true

{
  "component": "Part",
  "props": {
    "sessionId": "uuid-12345...",
    "questions": [
      {
        "id": 1,
        "text": "å•é¡Œ1...",
        "choices": [
          {"label": "A", "text": "é¸æŠè‚¢A", ...},
          ...
        ]
      },
      ...
    ],
    "currentPart": 1,
    "remainingTime": 7200,
    "totalQuestions": 30
  }
}
```

### ä¾‹3: è§£ç­”é€ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```
ã€CLIENT â†’ SERVERã€‘

POST /exam/answer HTTP/1.1
Host: exam.example.com
Content-Type: application/json
X-CSRF-TOKEN: <csrf_token_value>

{
  "exam_session_id": "uuid-12345...",
  "question_id": 1,
  "selected_choice": "A",
  "answered_at": "2024-01-20T10:30:45Z"
}

â†“ â†“ â†“ Middlewareå‡¦ç† â†“ â†“ â†“
- CSRF Tokenæ¤œè¨¼
- Sessionæ¤œè¨¼

â†“ â†“ â†“ Controllerå‡¦ç† â†“ â†“ â†“
ExamController::submitAnswer
- ã‚»ãƒƒã‚·ãƒ§ãƒ³å­˜åœ¨ç¢ºèª
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç¢ºèª
- é‡è¤‡è§£ç­”ãƒã‚§ãƒƒã‚¯
- æ­£è§£åˆ¤å®š

DBæ“ä½œ:
INSERT INTO answers (
  exam_session_id, question_id, user_choice, is_correct
) VALUES (...)

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 200 OK
Content-Type: application/json

{
  "success": true,
  "message": "è§£ç­”ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸ",
  "answer_id": 12345,
  "is_correct": true,
  "progress": {
    "answered": 1,
    "total": 30
  }
}
```

### ä¾‹4: ç®¡ç†è€… - ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ

```
ã€CLIENT â†’ SERVERã€‘

POST /admin/events HTTP/1.1
Host: exam.example.com
Content-Type: application/json
X-CSRF-TOKEN: <csrf_token_value>

{
  "name": "2024å¹´åº¦ 1æœˆ é©æ€§æ¤œæŸ»",
  "passphrase": "EXAM202401",
  "begin_at": "2024-01-22T09:00:00",
  "end_at": "2024-01-22T11:00:00",
  "exam_type": "programming",
  "part1_questions": 30,
  "part2_questions": 30,
  "part3_questions": 30,
  "time_limit": 120
}

â†“ â†“ â†“ Middlewareå‡¦ç† â†“ â†“ â†“
- ç®¡ç†è€…èªè¨¼ç¢ºèª (AdminMiddleware)
- CSRF Tokenæ¤œè¨¼
- æ¨©é™ç¢ºèª

â†“ â†“ â†“ Controllerå‡¦ç† â†“ â†“ â†“
Admin\EventManagementController::store
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- passphrase ãƒ¦ãƒ‹ãƒ¼ã‚¯ç¢ºèª
- æ—¥æ™‚ã®å¦¥å½“æ€§ç¢ºèª

DBæ“ä½œ:
INSERT INTO events (name, passphrase, begin_at, ...) VALUES (...)

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 201 Created
Location: /admin/events/1
Content-Type: application/json

{
  "component": "Events.Show",
  "props": {
    "event": {
      "id": 1,
      "name": "2024å¹´åº¦ 1æœˆ é©æ€§æ¤œæŸ»",
      "passphrase": "EXAM202401",
      "begin_at": "2024-01-22T09:00:00",
      ...
    },
    "message": "ã‚¤ãƒ™ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸ"
  }
}
```

### ä¾‹5: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

```
ã€CLIENT â†’ SERVERã€‘

POST /exam/answer HTTP/1.1
X-CSRF-TOKEN: <invalid_token>

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 419 Token Mismatch
Content-Type: application/json

{
  "message": "CSRF token mismatch"
}

---

ã€CLIENT â†’ SERVERã€‘

GET /admin/dashboard HTTP/1.1
Authorization: <no session>

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 302 Found
Location: /admin/login

---

ã€CLIENT â†’ SERVERã€‘

POST /login HTTP/1.1
{
  "email": "user@example.com"
  // password ãŒç©º
}

ã€SERVER â†’ CLIENTã€‘

HTTP/1.1 422 Unprocessable Entity
Content-Type: application/json

{
  "message": "The given data was invalid.",
  "errors": {
    "password": ["The password field is required."]
  }
}
```

## ğŸ” CSRF ãƒˆãƒ¼ã‚¯ãƒ³ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ãƒšãƒ¼ã‚¸æœ€åˆãƒ­ãƒ¼ãƒ‰ (GET)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Laravel Server       â”‚
    â”‚ - CSRF Tokenç”Ÿæˆ     â”‚
    â”‚   token = 64æ–‡å­—    â”‚
    â”‚ - Session ã«ä¿å­˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HTML Response ã«å«ã‚ã‚‹   â”‚
    â”‚ <meta name="csrf-token"  â”‚
    â”‚  content="...token...">  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Vue.js)             â”‚
â”‚ - meta ã‚¿ã‚°ã‹ã‚‰ token å–å¾—       â”‚
â”‚ - Axios header ã«è¨­å®š           â”‚
â”‚   X-CSRF-TOKEN: <token>        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ ã™ã¹ã¦ã® POST/PUT/DELETE ã§
               â”‚ X-CSRF-TOKEN ã‚’é€ä¿¡
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚µãƒ¼ãƒãƒ¼ (Middleware)             â”‚
â”‚ VerifyCsrfToken                  â”‚
â”‚                                  â”‚
â”‚ æ¤œè¨¼:                            â”‚
â”‚ 1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰      â”‚
â”‚    X-CSRF-TOKEN æŠ½å‡º            â”‚
â”‚ 2. Session ã® token ã¨æ¯”è¼ƒ       â”‚
â”‚ 3. ä¸€è‡´ â†’ å‡¦ç†ç¶™ç¶š              â”‚
â”‚ 4. ä¸ä¸€è‡´ â†’ 419 ã‚¨ãƒ©ãƒ¼           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session ä½œæˆ                   â”‚
â”‚ - session_id ç”Ÿæˆ             â”‚
â”‚ - user_id ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«ä¿å­˜  â”‚
â”‚ - æœ‰åŠ¹æœŸé™è¨­å®š (2æ™‚é–“ãªã©)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cookie è¨­å®š                    â”‚
â”‚ Set-Cookie: LARAVEL_SESSION={..}
â”‚ HttpOnly: true (JS ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯)
â”‚ Secure: true (HTTPS only)     â”‚
â”‚ SameSite: strict              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ                    â”‚
â”‚ Cookie è‡ªå‹•ä¿æŒ               â”‚
â”‚ (ä»¥é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§è‡ªå‹•é€ä¿¡)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã«                â”‚
â”‚ Middleware ãŒ Session æ¤œè¨¼     â”‚
â”‚ - session_id ç¢ºèª             â”‚
â”‚ - user_id å–å¾—                â”‚
â”‚ - æ¨©é™ç¢ºèª                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ           â”‚
â”‚ - æœŸé™åˆ‡ã‚Œ â†’ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ        â”‚
â”‚ - ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

```
ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€‘

Rule::required ('å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰')
Rule::email ('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼')
Rule::min:8 ('æœ€å°æ–‡å­—æ•°')
Rule::max:255 ('æœ€å¤§æ–‡å­—æ•°')
Rule::unique:users,email ('ãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„')
Rule::confirmed ('ç¢ºèªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸€è‡´')
Rule::regex:/^[0-9]{4}$/ ('æ•°å­—4æ¡')

ã€è§£ç­”æ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€‘

Rule::required ('è§£ç­”å¿…é ˆ')
Rule::exists:questions,id ('å•é¡ŒIDç¢ºèª')
Rule::in:A,B,C,D ('é¸æŠè‚¢ãƒã‚§ãƒƒã‚¯')

ã€ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆæ™‚ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€‘

Rule::required ('å¿…é ˆ')
Rule::date_format:Y-m-d H:i:s ('æ—¥æ™‚å½¢å¼')
Rule::after:now ('é–‹å§‹æ™‚åˆ»ã¯æœªæ¥')
Rule::after:begin_at ('çµ‚äº†æ™‚åˆ» > é–‹å§‹æ™‚åˆ»')
Rule::unique:events,passphrase ('ã‚³ãƒ¼ãƒ‰é‡è¤‡ãƒã‚§ãƒƒã‚¯')
```
