# システム構成図案 - 索引＆ガイド

システム構成を複数の視点から図解したドキュメント集です。  
異なるレベルの詳細度で表現しているので、用途に応じて選択できます。

---

## 📚 ドキュメント一覧

### 1️⃣ [基本3層アーキテクチャ](ARCHITECTURE_01_BASIC_3LAYER.md)

**対象**: 「大まかなシステム構成を把握したい」

**内容**:

- シンプルな3層構成 (プレゼンテーション・ビジネスロジック・データ)
- データフロー図
- セキュリティレイヤー概要
- ユーザーフロー基本図
- デプロイメント環境
- レスポンスタイム目安

**分量**: 中程度  
**活用例**:

- システム全体の概要説明
- 新しいメンバーのオンボーディング
- 経営層・ステークホルダーへの説明

**draw.io 対応**: ✅ テキスト形式で即座に図形変換可能

---

### 2️⃣ [詳細アーキテクチャ](ARCHITECTURE_02_DETAILED_COMPONENTS.md)

**対象**: 「各層の詳細を知りたい」

**内容**:

- フロントエンド詳細 (Vue, Inertia, Components)
- バックエンド詳細 (Controllers, Services, Models)
- データベース詳細スキーマ (テーブル構造・リレーション)
- セキュリティアーキテクチャ (7層防御)
- APIエンドポイント一覧

**分量**: 大きめ (技術詳細が豊富)  
**活用例**:

- 開発者向けの詳細設計書
- コンポーネント設計の確認
- テーブルリレーション図の作成
- API ドキュメント参照

**draw.io 対応**: ✅ コンポーネント図・ER図作成に最適

---

### 3️⃣ [ユースケース＆シーケンス図](ARCHITECTURE_03_USECASE_SEQUENCE.md)

**対象**: 「実際のユーザーの操作フロー・通信シーケンスを知りたい」

**内容**:

- ユースケース図 (3ユーザー種別)
- シーケンス図 (ユーザーログイン～試験)
- シーケンス図 (ゲスト試験実施)
- シーケンス図 (管理者のイベント作成)
- 不正検知フロー (システムと管理者)
- トラフィックフロー (複数ユーザー同時)

**分量**: 大きめ (シーケンス図が詳細)  
**活用例**:

- 通信フロー図の作成
- ユースケース図の作成
- 時系列の処理フロー図
- テスト設計・QA向け

**draw.io 対応**: ✅ ユースケース図・シーケンス図作成に最適

---

## 🎯 用途別推奨ドキュメント

### 📊 発表資料用

```
【初心者向けプレゼン】
→ [基本3層アーキテクチャ] の
  ├─ シンプルな3層構成
  ├─ データフロー図
  └─ セキュリティレイヤー概要

【技術系プレゼン】
→ [詳細アーキテクチャ] の
  ├─ フロントエンド詳細
  ├─ バックエンド詳細
  ├─ データベース詳細スキーマ
  └─ API エンドポイント一覧

【ビジネス層向け】
→ [ユースケース図]
  └─ 各ユーザーが何をするのか
```

---

### 🔧 開発・設計用

```
【新規メンバーのオンボーディング】
1. [基本3層アーキテクチャ] で全体像把握
2. [詳細アーキテクチャ] で各層の詳細確認
3. [ユースケース図] で実装対象を理解

【新機能開発】
1. [ユースケース図] でユースケース確認
2. [詳細アーキテクチャ] でコンポーネント設計
3. [シーケンス図] で通信フロー確認

【デバッグ・トラブルシューティング】
→ [シーケンス図] で処理フロー確認
→ [詳細アーキテクチャ] でコンポーネント確認

【テスト設計】
→ [ユースケース図] で全ユースケース把握
→ [シーケンス図] で各フロー確認
```

---

### 📐 Draw.io での図作成

```
【システム全体図を作りたい】
→ [基本3層アーキテクチャ] の
  "シンプルな3層構成"
  を draw.io にコピペ

【コンポーネント図を作りたい】
→ [詳細アーキテクチャ] の
  ├─ フロントエンド詳細
  ├─ バックエンド詳細
  を draw.io にコピペ

【ER図を作りたい】
→ [詳細アーキテクチャ] の
  "データベース詳細アーキテクチャ"
  を draw.io にコピペ

【ユースケース図を作りたい】
→ [ユースケース図]
  を draw.io にコピペ

【シーケンス図を作りたい】
→ [ユースケース図] の各シーケンス図
  を draw.io にコピペ
```

---

## 📊 ドキュメント間の関連性

```
基本3層アーキテクチャ [1]
    │ (詳細化)
    ▼
詳細アーキテクチャ [2]
    │ (実装フロー)
    ▼
ユースケース＆シーケンス [3]
```

---

## 🔍 各ファイル内の主要図

### [1] 基本3層アーキテクチャ

| 図の種類             | 説明                                           | コンテンツ           |
| -------------------- | ---------------------------------------------- | -------------------- |
| 3層構成              | プレゼンテーション・ビジネスロジック・データ層 | シンプルな階層図     |
| データフロー         | HTTP Request → DB Query → Response             | 矢印付きフロー       |
| セキュリティレイヤー | 7段階の防御                                    | 階層型セキュリティ図 |
| ユーザーフロー       | ゲスト・ユーザー・管理者の各フロー             | 並列フロー図         |
| デプロイ環境         | Docker コンテナ構成                            | コンテナ図           |

---

### [2] 詳細アーキテクチャ

| 図の種類                   | 説明                                     | コンテンツ       |
| -------------------------- | ---------------------------------------- | ---------------- |
| フロントエンド詳細         | Vue Pages・Components・Stores            | コンポーネント図 |
| バックエンド詳細           | Routing・Middleware・Controllers・Models | コンポーネント図 |
| DB詳細スキーマ             | 全テーブル構造・リレーション             | ER図             |
| セキュリティアーキテクチャ | 7層防御の詳細                            | 階層図           |
| API エンドポイント         | 全ルート一覧                             | リスト形式       |

---

### [3] ユースケース＆シーケンス

| 図の種類           | 説明                     | コンテンツ         |
| ------------------ | ------------------------ | ------------------ |
| ユースケース図     | 3ユーザー種別の全機能    | UML ユースケース図 |
| シーケンス図 1     | ユーザーログイン～試験   | UML シーケンス図   |
| シーケンス図 2     | ゲスト試験実施           | UML シーケンス図   |
| シーケンス図 3     | 管理者イベント作成       | UML シーケンス図   |
| 不正検知フロー     | ユーザー操作～管理者対応 | シーケンス図       |
| トラフィックフロー | 複数ユーザー同時アクセス | トポロジー図       |

---

## 💡 各図の使い分け

### 「全体像を把握したい」

→ **[基本3層アーキテクチャ]** の **3層構成**

### 「各コンポーネントを知りたい」

→ **[詳細アーキテクチャ]** の **フロントエンド/バックエンド詳細**

### 「テーブル設計を確認したい」

→ **[詳細アーキテクチャ]** の **DB詳細スキーマ**

### 「ユーザーの操作フローを知りたい」

→ **[ユースケース＆シーケンス]** の **ユースケース図**

### 「通信シーケンスを追いたい」

→ **[ユースケース＆シーケンス]** の **シーケンス図**

### 「不正検知の処理を理解したい」

→ **[ユースケース＆シーケンス]** の **不正検知フロー**

---

## ✅ Draw.io へのコピペ方法

### 1️⃣ テキスト形式の図をコピー

```
例:
┌────────────┐
│   Layer    │
└────────────┘
```

### 2️⃣ Draw.io を開く

```
https://www.draw.io
```

### 3️⃣ ファイルを新規作成

```
File → New
```

### 4️⃣ テキストをコピペ

```
テキストをコピー → Draw.io にペースト
```

### 5️⃣ 図形に変換

```
・ボックス → Shape (Rectangle)
・矢印 → Connector (Arrow)
・ラベル → Text
・線 → Line
を使用して図形化
```

### 6️⃣ デザイン調整

```
・色・フォント・サイズを統一
・グリッドアライン
・レイアウト整理
```

### 7️⃣ エクスポート

```
File → Export
→ PNG / SVG / PDF を選択
```

---

## 🎨 Draw.io での図作成Tips

### カラースキーム推奨

```
フロントエンド: 青系 (#3b82f6)
バックエンド:   緑系 (#10b981)
データベース:   紫系 (#a855f7)
セキュリティ:   赤系 (#ef4444)
```

### フォント設定

```
タイトル:     16-18pt, Bold
ラベル:       12-14pt, Regular
注釈:         10-12pt, Italic
```

### レイアウト規則

```
・要素間隔: 20px
・グループ化: 関連要素をグループ化
・配置: 左→右、上→下の流れ
```

---

## 📌 クイックリファレンス

| 必要な図         | 対応ファイル | 主要セクション      |
| ---------------- | ------------ | ------------------- |
| システム全体図   | [1]          | シンプルな3層構成   |
| ER図・スキーマ   | [2]          | DB詳細スキーマ      |
| コンポーネント図 | [2]          | フロント/バック詳細 |
| ユースケース図   | [3]          | ユースケース図      |
| シーケンス図     | [3]          | 各シーケンス図      |
| 不正検知フロー   | [3]          | 不正検知フロー      |

---

## 🎯 推奨される使用順序

### 図作成初心者

```
1. [基本3層アーキテクチャ] で全体把握
2. 各層を詳細化
3. [詳細アーキテクチャ] で具体化
4. Draw.io で実装
```

### 図作成経験者

```
1. 必要な図の種類を決定
2. 対応ファイルから該当セクション抽出
3. Draw.io にコピペ
4. 調整・完成
```

### プレゼン用途

```
1. [基本3層アーキテクチャ] で全体図作成
2. 聴き手に応じて詳細図を選択
3. 詳細図は参考資料に
```

---

## ✨ 今後の追加予定

- [ ] デプロイメント図 (Cloud 対応)
- [ ] スケーラビリティ図
- [ ] パフォーマンスプロファイリング図
- [ ] データベース最適化図
- [ ] 監視・ログ図
